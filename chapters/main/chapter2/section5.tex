\section{Sơ đồ tuần tự (Sequence Diagram)}

\subsection{Sơ đồ tuần tự xử lý thanh toán}
\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{graphics/main/chapter2/section2/sequence_vnpay.jpg}
    \caption{Sơ đồ tuần tự xử lý thanh toán}
    \label{fig:sequence_vnpay}
\end{figure}
\subsubsection{Mục đích}
Sequence diagram này mô tả quy trình thanh toán trực tuyến của hệ thống với hai phương thức: thanh toán khi nhận hàng (COD) và thanh toán qua cổng VNPay. Sơ đồ thể hiện tương tác giữa khách hàng, hệ thống backend và cổng thanh toán VNPay trong suốt quá trình đặt hàng và thanh toán.

\subsubsection{Mô tả luồng hoạt động}
Luồng thanh toán COD
\begin{enumerate}[noitemsep]
    \item Khách hàng chọn phương thức thanh toán COD
    \item Khách hàng xác nhận thanh toán COD
    \item Backend tạo đơn hàng mới
    \item Backend hiển thị kết quả thanh toán COD cho khách hàng
\end{enumerate}

Luồng thanh toán VNPay
\begin{enumerate}[noitemsep]
    \item Khách hàng chọn phương thức thanh toán VNPay
    \item Backend chuyển hướng khách hàng đến cổng thanh toán VNPay
    \item VNPay hiển thị giao diện thanh toán cho khách hàng
    \item Khách hàng thực hiện thanh toán trên VNPay
    \item VNPay trả kết quả giao dịch (thành công/thất bại) về Backend
    \item Backend xử lý kết quả:
    \begin{itemize}[noitemsep]
        \item Nếu thanh toán thành công: Backend hiển thị kết quả thành công
        \item Nếu thanh toán thất bại: Backend hiển thị kết quả thất bại
    \end{itemize}
\end{enumerate}

Xem lịch sử đơn hàng
\begin{enumerate}[noitemsep]
    \item Sau khi thanh toán, khách hàng có thể xem lịch sử đơn hàng
    \item Backend hiển thị danh sách đơn hàng của khách hàng
\end{enumerate}
\subsection{Sơ đồ tuần tự phân tích da mặt}
\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{graphics/main/chapter2/section2/sequence_acne.jpg}
    \caption{Sơ đồ tuần tự phân tích da mặt}
    \label{fig:sequence_acne}
\end{figure}
\subsubsection{Mục đích}
Sequence diagram này mô tả quy trình phân tích da mặt sử dụng trí tuệ nhân tạo. Sơ đồ thể hiện luồng xử lý từ khi người dùng upload ảnh khuôn mặt, qua các bước nhận diện khuôn mặt bằng MediaPipe, phân tích mụn bằng mô hình CNN, đến khi trả về kết quả phân tích cùng lời khuyên và gợi ý sản phẩm phù hợp.

\subsubsection{Mô tả luồng hoạt động}

\begin{enumerate}[noitemsep]
    \item Người dùng upload ảnh khuôn mặt lên hệ thống Backend
    \item Backend gửi ảnh đến MediaPipe để nhận diện khuôn mặt và các điểm landmark
    \item MediaPipe trả về tọa độ khuôn mặt và các điểm landmark
    \item Backend cắt từng vùng da mặt (Trán, Má, Mũi, Cằm) dựa trên landmark
    \item Backend gửi từng vùng da đã cắt đến mô hình CNN để phân tích mụn
    \item CNN Model phát hiện mụn và trả về kết quả (số lượng, vị trí, mức độ)
    \item Backend tổng hợp kết quả từ tất cả các vùng da
    \item Backend trả về kết quả phân tích chi tiết cho người dùng
    \item Backend đưa ra lời khuyên chăm sóc da dựa trên kết quả phân tích
    \item Backend gợi ý các sản phẩm phù hợp với tình trạng da của người dùng
\end{enumerate}